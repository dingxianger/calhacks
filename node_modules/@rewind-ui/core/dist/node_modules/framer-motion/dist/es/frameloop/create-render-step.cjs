"use strict";exports.createRenderStep=function(e){let t=[],s=[],n=0,c=!1,l=!1;const r=new WeakSet,o={schedule:(e,l=!1,o=!1)=>{const d=o&&c,h=d?t:s;return l&&r.add(e),-1===h.indexOf(e)&&(h.push(e),d&&c&&(n=t.length)),e},cancel:e=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1),r.delete(e)},process:d=>{if(c)l=!0;else{if(c=!0,[t,s]=[s,t],s.length=0,n=t.length,n)for(let s=0;s<n;s++){const n=t[s];n(d),r.has(n)&&(o.schedule(n),e())}c=!1,l&&(l=!1,o.process(d))}}};return o};
