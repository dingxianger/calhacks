"use strict";var e=require("./create-render-step.cjs"),r=require("./data.cjs");let a=!0,t=!1;const s=["read","update","preRender","render","postRender"],c=s.reduce(((r,a)=>(r[a]=e.createRenderStep((()=>t=!0)),r)),{}),n=e=>c[e].process(r.frameData),m=e=>{t=!1,r.frameData.delta=a?1e3/60:Math.max(Math.min(e-r.frameData.timestamp,40),1),r.frameData.timestamp=e,r.frameData.isProcessing=!0,s.forEach(n),r.frameData.isProcessing=!1,t&&(a=!1,requestAnimationFrame(m))},i=s.reduce(((e,s)=>{const n=c[s];return e[s]=(e,s=!1,c=!1)=>(t||(t=!0,a=!0,r.frameData.isProcessing||requestAnimationFrame(m)),n.schedule(e,s,c)),e}),{});exports.cancelFrame=function(e){s.forEach((r=>c[r].cancel(e)))},exports.frame=i,exports.steps=c,exports.stepsOrder=s;
