import{PanSession as n}from"./PanSession.js";import{addPointerEvent as e}from"../../events/add-pointer-event.js";import{Feature as o}from"../../motion/features/Feature.js";import{noop as t}from"../../utils/noop.js";import{frame as s}from"../../frameloop/index.js";const r=n=>(e,o)=>{n&&s.update((()=>n(e,o)))};class i extends o{constructor(){super(...arguments),this.removePointerDownListener=t}onPointerDown(e){this.session=new n(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:e,onPan:o,onPanEnd:t}=this.node.getProps();return{onSessionStart:r(n),onStart:r(e),onMove:o,onEnd:(n,e)=>{delete this.session,t&&s.update((()=>t(n,e)))}}}mount(){this.removePointerDownListener=e(this.node.current,"pointerdown",(n=>this.onPointerDown(n)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}export{i as PanGesture};
