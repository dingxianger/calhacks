import{invariant as t}from"../../../utils/errors.js";import{isCSSVariableToken as n}from"./is-css-variable.js";const r=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function e(t){const n=r.exec(t);if(!n)return[,];const[,e,o]=n;return[e,o]}const o=4;function i(r,c,s=1){t(s<=o,`Max CSS variable fallback depth detected in property "${r}". This may indicate a circular fallback dependency.`);const[a,u]=e(r);if(!a)return;const f=window.getComputedStyle(c).getPropertyValue(a);return f?f.trim():n(u)?i(u,c,s+1):u}function c(t,{...r},e){const o=t.current;if(!(o instanceof Element))return{target:r,transitionEnd:e};e&&(e={...e}),t.values.forEach((t=>{const r=t.get();if(!n(r))return;const e=i(r,o);e&&t.set(e)}));for(const t in r){const c=r[t];if(!n(c))continue;const s=i(c,o);s&&(r[t]=s,e||(e={}),void 0===e[t]&&(e[t]=c))}return{target:r,transitionEnd:e}}export{e as parseCSSVariable,c as resolveCSSVariables};
