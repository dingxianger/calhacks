"use strict";var r=require("../../render/utils/resolve-dynamic-variants.cjs"),e=require("./visual-element-target.cjs");function t(i,a,o={}){const s=r.resolveVariant(i,a,o.custom);let{transition:l=i.getDefaultTransition()||{}}=s||{};o.transitionOverride&&(l=o.transitionOverride);const d=s?()=>Promise.all(e.animateTarget(i,s,o)):()=>Promise.resolve(),u=i.variantChildren&&i.variantChildren.size?(r=0)=>{const{delayChildren:e=0,staggerChildren:s,staggerDirection:d}=l;return function(r,e,i=0,a=0,o=1,s){const l=[],d=(r.variantChildren.size-1)*a,u=1===o?(r=0)=>r*a:(r=0)=>d-r*a;return Array.from(r.variantChildren).sort(n).forEach(((r,n)=>{r.notify("AnimationStart",e),l.push(t(r,e,{...s,delay:i+u(n)}).then((()=>r.notify("AnimationComplete",e))))})),Promise.all(l)}(i,a,e+r,s,d,o)}:()=>Promise.resolve(),{when:c}=l;if(c){const[r,e]="beforeChildren"===c?[d,u]:[u,d];return r().then((()=>e()))}return Promise.all([d(),u(o.delay)])}function n(r,e){return r.sortNodePosition(e)}exports.animateVariant=t,exports.sortByTreeOrder=n;
