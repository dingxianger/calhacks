import*as t from"react";import{forwardRef as e,useContext as o}from"react";import{MotionConfigContext as r}from"../context/MotionConfigContext.js";import{MotionContext as n}from"../context/MotionContext/index.js";import{useVisualElement as i}from"./utils/use-visual-element.js";import{useMotionRef as s}from"./utils/use-motion-ref.js";import{useCreateMotionContext as m}from"../context/MotionContext/create.js";import{loadFeatures as l}from"./features/load-features.js";import{isBrowser as u}from"../utils/is-browser.js";import{LayoutGroupContext as a}from"../context/LayoutGroupContext.js";import{LazyContext as c}from"../context/LazyContext.js";import{SwitchLayoutGroupContext as f}from"../context/SwitchLayoutGroupContext.js";import{motionComponentSymbol as p}from"./utils/symbol.js";function x({preloadedFeatures:a,createVisualElement:x,useRender:d,useVisualState:j,Component:E}){a&&l(a);const C=e((function(e,l){let p;const C={...o(r),...e,layoutId:v(e)},{isStatic:y}=C,L=m(e),M=j(e,y);if(!y&&u){L.visualElement=i(E,M,C,x);const t=o(f),e=o(c).strict;L.visualElement&&(p=L.visualElement.loadFeatures(C,e,a,t))}return t.createElement(n.Provider,{value:L},p&&L.visualElement?t.createElement(p,{visualElement:L.visualElement,...C}):null,d(E,e,s(M,L.visualElement,l),M,y,L.visualElement))}));return C[p]=E,C}function v({layoutId:t}){const e=o(a).id;return e&&void 0!==t?e+"-"+t:t}export{x as createMotionComponent};
