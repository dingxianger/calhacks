"use strict";var e=require("react"),t=require("../../context/PresenceContext.cjs"),n=require("../../context/MotionContext/index.cjs"),o=require("../../utils/use-isomorphic-effect.cjs"),i=require("../../context/LazyContext.cjs"),r=require("../../context/MotionConfigContext.cjs");exports.useVisualElement=function(s,u,c,a){const{visualElement:f}=e.useContext(n.MotionContext),x=e.useContext(i.LazyContext),C=e.useContext(t.PresenceContext),p=e.useContext(r.MotionConfigContext).reducedMotion,d=e.useRef();a=a||x.renderer,!d.current&&a&&(d.current=a(s,{visualState:u,parent:f,props:c,presenceContext:C,blockInitialAnimation:!!C&&!1===C.initial,reducedMotionConfig:p}));const m=d.current;return e.useInsertionEffect((()=>{m&&m.update(c,C)})),o.useIsomorphicLayoutEffect((()=>{m&&m.render()})),e.useEffect((()=>{m&&m.updateFeatures()})),(window.HandoffAppearAnimations?o.useIsomorphicLayoutEffect:e.useEffect)((()=>{m&&m.animationState&&m.animationState.animateChanges()})),m};
