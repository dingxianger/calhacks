"use strict";var e=require("./PanSession.cjs"),n=require("../../events/add-pointer-event.cjs"),s=require("../../motion/features/Feature.cjs"),t=require("../../utils/noop.cjs"),o=require("../../frameloop/index.cjs");const r=e=>(n,s)=>{e&&o.frame.update((()=>e(n,s)))};class i extends s.Feature{constructor(){super(...arguments),this.removePointerDownListener=t.noop}onPointerDown(n){this.session=new e.PanSession(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:t}=this.node.getProps();return{onSessionStart:r(e),onStart:r(n),onMove:s,onEnd:(e,n)=>{delete this.session,t&&o.frame.update((()=>t(e,n)))}}}mount(){this.removePointerDownListener=n.addPointerEvent(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}exports.PanGesture=i;
