"use strict";var e=require("react"),t=require("../context/MotionConfigContext.cjs"),o=require("../context/MotionContext/index.cjs"),n=require("./utils/use-visual-element.cjs"),r=require("./utils/use-motion-ref.cjs"),u=require("../context/MotionContext/create.cjs"),i=require("./features/load-features.cjs"),s=require("../utils/is-browser.cjs"),a=require("../context/LayoutGroupContext.cjs"),c=require("../context/LazyContext.cjs"),l=require("../context/SwitchLayoutGroupContext.cjs"),x=require("./utils/symbol.cjs");function C(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var f=C(e);function m({layoutId:t}){const o=e.useContext(a.LayoutGroupContext).id;return o&&void 0!==t?o+"-"+t:t}exports.createMotionComponent=function({preloadedFeatures:a,createVisualElement:C,useRender:d,useVisualState:j,Component:v}){a&&i.loadFeatures(a);const y=e.forwardRef((function(i,x){let y;const E={...e.useContext(t.MotionConfigContext),...i,layoutId:m(i)},{isStatic:p}=E,q=u.useCreateMotionContext(i),b=j(i,p);if(!p&&s.isBrowser){q.visualElement=n.useVisualElement(v,b,E,C);const t=e.useContext(l.SwitchLayoutGroupContext),o=e.useContext(c.LazyContext).strict;q.visualElement&&(y=q.visualElement.loadFeatures(E,o,a,t))}return f.createElement(o.MotionContext.Provider,{value:q},y&&q.visualElement?f.createElement(y,{visualElement:q.visualElement,...E}):null,d(v,i,r.useMotionRef(b,q.visualElement,x),b,p,q.visualElement))}));return y[x.motionComponentSymbol]=v,y};
