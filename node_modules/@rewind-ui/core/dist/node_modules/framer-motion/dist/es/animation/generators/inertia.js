import{spring as e}from"./spring/index.js";import{calcGeneratorVelocity as t}from"./utils/velocity.js";function o({keyframes:o,velocity:n=0,power:a=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:l,min:v,max:d,restDelta:u=.5,restSpeed:c}){const m=o[0],f={done:!1,value:m},p=e=>void 0===v?d:void 0===d||Math.abs(v-e)<Math.abs(d-e)?v:d;let x=a*n;const y=m+x,b=void 0===l?y:l(y);b!==y&&(x=b-m);const g=e=>-x*Math.exp(-e/i),h=e=>b+g(e),D=e=>{const t=g(e),o=h(e);f.done=Math.abs(t)<=u,f.value=f.done?b:o};let M,S;const j=o=>{var n;(n=f.value,void 0!==v&&n<v||void 0!==d&&n>d)&&(M=o,S=e({keyframes:[f.value,p(f.value)],velocity:t(h,o,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==M||(t=!0,D(e),j(e)),void 0!==M&&e>M?S.next(e-M):(!t&&D(e),f)}}}export{o as inertia};
