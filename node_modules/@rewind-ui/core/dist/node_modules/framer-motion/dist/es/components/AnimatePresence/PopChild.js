import*as t from"react";import{useId as e,useRef as n,useInsertionEffect as r}from"react";class o extends t.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:i,isPresent:s}){const p=e(),h=n(null),d=n({width:0,height:0,top:0,left:0});return r((()=>{const{width:t,height:e,top:n,left:r}=d.current;if(s||!h.current||!t||!e)return;h.current.dataset.motionPopId=p;const o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`\n          [data-motion-pop-id="${p}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            top: ${n}px !important;\n            left: ${r}px !important;\n          }\n        `),()=>{document.head.removeChild(o)}}),[s]),t.createElement(o,{isPresent:s,childRef:h,sizeRef:d},t.cloneElement(i,{ref:h}))}export{i as PopChild};
